
<!DOCTYPE html>
<html>
<head>
	<title>DragonsTV GFX</title>
	<link rel="stylesheet" type="text/css" href="combined.css">
	<script src="bower_components/easytimer.js/dist/easytimer.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script type="text/javascript">


		var currentGraphic, currentPeriod, lowerThird, currentImage, imageAnimation, liveDataRep;


		$(document).ready(function() {
			currentGraphic = nodecg.Replicant("currentGraphic");
			currentPeriod = nodecg.Replicant("currentPeriod");
			lowerThird = nodecg.Replicant("lowerThird");
			currentImage = nodecg.Replicant('currentImage');
			imageAnimation = nodecg.Replicant('imageAnimation');
			liveDataRep = nodecg.Replicant('liveData');

			const toggleMatchup = nodecg.Replicant('toggleMatchup');
			const toggleFinal = nodecg.Replicant('toggleFinal');

			liveDataRep.on('change', (newValue, oldValue) => {
				$('#TIMER').text(newValue.clockStr);
				$('#HOME_SCORE').text(newValue.homeScore);
				$('#AWAY_SCORE').text(newValue.awayScore);
				$('#PERIOD').text(newValue.period);
			})

			toggleMatchup.on('change', (newValue, oldValue) => {
				if(newValue == true) { show('MATCHUP'); }
				else { show('NONE'); }
			})

			toggleFinal.on('change', (newValue, oldValue) => {
				if(newValue == true) { show('FINAL'); }
				else { show('NONE'); }
			})

			currentGraphic.on('change', (newValue, oldValue) => {
				show(newValue);
			});

			currentPeriod.on('change', (newValue, oldValue) => {
				$(".PERIOD").text(newValue);
			});

			lowerThird.on('change', (newValue, oldValue) => {
				$(".TOP_TEXT").text(newValue["upperText"]);
				$(".BOTTOM_TEXT").text(newValue["lowerText"]);
				$(".SECONDARY_TEXT").text(newValue["secondaryText"]);
				if(newValue["secondaryText"] != "") {
					$(".workspace").addClass("show_secondary")
				} else {
					$(".workspace").removeClass("show_secondary")
				}
			});

			currentImage.on('change', (newValue, oldValue) => {
				$("#CUSTOMIMAGE").attr("src",newValue);
			});

			imageAnimation.on('change', (newValue, oldValue) => {
				let newClasses = "view "
				if ($("#IMAGE").hasClass("active")) {
					newClasses += "active "
				}
				$("#IMAGE").attr("class", newClasses + newValue);
			});
		});


		nodecg.listenFor('toggleGraphic', message => {
			toggleVisible(message);
		});

		function toggleVisible(id) {
			id = `#${id}`;
			if($(id).hasClass('active')) {
				$(id).removeClass('active').addClass('inactive');
			}
			else {
				$(id).removeClass('inactive').addClass('active');
			}
		}

		function show(id) {
			let elements = document.getElementsByClassName("active");

			while(elements.length > 0){
				let el = elements[0];

				el.classList.add("inactive");
				el.classList.remove("active");
			}
			if(id != "NONE") {
				document.getElementById(id).classList.add("active");
				document.getElementById(id).classList.remove("inactive");
			}
		}
	</script>

</head>
<body>
	<div id="view" class="scorebug testing-off">
		<div id="SCOREBUG" class="view slideLeft">
			<div class="team" id="HOME" style="background-color: #07294D">
				<div id="HOME_IMG" class="img" style="background-image: url('https://drexel.edu/~/media/Images/identity/athletics/athletics_primary.ashx?la=en')" ></div>
				<div id="HOME_TEXT_COLOR" style="color: #FFFFFF" class="text">
					<div id="HOME_SCORE" class="score HOME_SCORE">0</div>
					<div class="name">DREXEL</div>
				</div>
			</div>

			<div id="middle">
				<div id="INFO" class="scorebug_visible visible">
					<div id="TIMER"><span class="TIME_MINUTES">0</span>:<span class="TIME_SECONDS">00</span></div>
					<hr class="faded" />
					<div id="PERIOD" class="PERIOD">1st</div>
				</div>
			</div>

			<div class="team scorebug_visible" id="AWAY" style="background-color: #00539F">
				<div id="AWAY_IMG" class="img" style="background-image: url('http://a2.espncdn.com/combiner/i?img=%2Fi%2Fteamlogos%2Fncaa%2F500%2F48.png')"> </div>
				<div id="AWAY_TEXT_COLOR" style="color: #FFF" class="text scorebug_visible">
					<div id="AWAY_SCORE" class="score AWAY_SCORE">0</div>
					<div id="AWAY_NAME" color="#450084" class="name">DELAWARE</div>
				</div>
			</div>

			<div class='card' id='YELLOW'>

			</div>
		</div>


		<div id="MATCHUP" class="view fade">
			<div class="shadow padded upper matchup_visible">
				<span id="DATE">August 22, 2019</span> <span class="separator">&mdash;</span> Philadelphia, PA
			</div>
			<div class="team" id="HOME" style="background-color: #07294D">
				<div id="HOME_IMG" class="img" style="background-image: url('https://drexel.edu/~/media/Images/identity/athletics/athletics_primary.ashx?la=en')" ></div>
				<div id="HOME_TEXT_COLOR" style="color: #FFFFFF" class="text">
					<div class="name">DREXEL</div>
					<div class="title">DRAGONS</div>
				</div>
			</div>
			<div class="team" id="AWAY" style="background-color: #00539F">
				<div id="AWAY_IMG" class="img" style="background-image: url('http://a2.espncdn.com/combiner/i?img=%2Fi%2Fteamlogos%2Fncaa%2F500%2F48.png')"> </div>
				<div id="AWAY_TEXT_COLOR" style="color: #FFFFFF" class="text">
					<div id="AWAY_NAME" color="#450084" class="name">DELAWARE</div>
					<div id="AWAY_TITLE" class="title" color="#FFC600">BLUE HENS</div>
				</div>
			</div>
			<div class="grey padded">
				<div class="matchup_visible padded">
					<div id="GAME_NAME" class="upper bigger">Drexel Men's Basketball</div>
					<hr>
					<div id="sponsor">Presented by
						<img id="SPONSOR_IMG" width="290" src="https://www.cancergoldstandard.org/sites/default/files/organisation/IBC_RGB_Blue_300.png" />
					</div>
				</div>
			</div>
		</div>

		<div id="FINAL" class="view slideUp">
			<div class="team" id="HOME" style="background-color: #07294D">
				<div id="HOME_IMG" class="img" style="background-image: url('https://drexel.edu/~/media/Images/identity/athletics/athletics_primary.ashx?la=en')" ></div>
				<div id="HOME_TEXT_COLOR" style="color: #FFFFFF" class="text">
					<div id="HOME_SCORE" class="score HOME_SCORE">0</div>
					<div class="name">DREXEL</div>
					<div class="title">DRAGONS</div>
				</div>
			</div>

			<div class="team" id="AWAY" style="background-color: #00539F">
				<div id="AWAY_IMG" class="img" style="background-image: url('http://a2.espncdn.com/combiner/i?img=%2Fi%2Fteamlogos%2Fncaa%2F500%2F48.png')"> </div>
				<div id="AWAY_TEXT_COLOR" style="color: #FFFFFF" class="text">
					<div id="AWAY_SCORE" class="score AWAY_SCORE">0</div>
					<div id="AWAY_NAME" class="name">DELAWARE</div>
					<div id="AWAY_TITLE" class="title">BLUE HENS</div>
				</div>
			</div>

			<div id="FINAL_TEXT" class="grey padded">
				<span class="PERIOD">FINAL</span>
					<div id="sponsor">
						<img id="SPONSOR_IMG" src="https://www.cancergoldstandard.org/sites/default/files/organisation/IBC_RGB_Blue_300.png" />
					</div>
			</div>
		</div>

		<div id="HOME_LOWER_THIRD" class="view slideUp">
			<div class="workspace">
				<div class="logo" id="LOGO_BG" style="background-color: #07294D">
					<div id="LOGO" class="img" style="background-image: url('https://drexel.edu/~/media/Images/identity/athletics/athletics_primary.ashx?la=en')" ></div>
				</div>
				<div class="padded">
					<div id="BOTTOM_TEXT" class="BOTTOM_TEXT">TITLE HERE</div>
					<div id="TOP_TEXT" class="bigger TOP_TEXT">CAPTION</div>

				</div>
				<div class="SECONDARY_TEXT">Secondary Text</div>
			</div>
		</div>

		<div id="AWAY_LOWER_THIRD" style="border-color: #eee" class="view slideUp">
			<div class="workspace " >
				<div class="logo" id="LOGO_BG" style="background-color: #00539F">
					<div id="LOGO" class="img" style="background-image: url('https://upload.wikimedia.org/wikipedia/en/thumb/7/72/Towson_Tigers_logo.svg/1200px-Towson_Tigers_logo.svg.png')" ></div>
				</div>
				<div class="padded">
					<div id="BOTTOM_TEXT" class="BOTTOM_TEXT">CAPTION</div>
					<div id="TOP_TEXT" class="bigger TOP_TEXT">TITLE HERE</div>
				</div>
				<div class="SECONDARY_TEXT">Secondary Text</div>
			</div>
		</div>

		<div id="IMAGE" class="view grow"><img id="CUSTOMIMAGE" src="half_stats.png" /></div></div>
</body>
</html>
